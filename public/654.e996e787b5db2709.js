"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[654],{2654:(F,u,o)=>{o.r(u),o.d(u,{UsersManagerModule:()=>R});var p=o(9808),g=o(9735),v=o(5861),c=o(3071),x=o(2386),U=o(4597),Z=o(7225),h=o(590),f=o(4004),e=o(5e3),T=o(7556),m=o(573),d=o(7805);function y(a,r){1&a&&(e.TgZ(0,"dxi-item",28),e._UZ(1,"dxi-validation-rule",5),e._UZ(2,"dxi-validation-rule",12),e.qZA()),2&a&&e.Q6J("colSpan",1)}const w=function(){return{mode:"password"}},A=function(a){return{disabled:a}},S=function(){return["5","10","15"]},C=[{path:"",component:(()=>{class a extends x.V{constructor(i,t){super(),this._usersService=i,this._authService=t,this.users=[],this.userType=c.KD.userType,this.popUpLabel="Add User",this.currentUserIdEditing=!1,this.userCache=this._authService.userInfo,this.passwordComparison=()=>{var l;return null===(l=this.textBox)||void 0===l?void 0:l.option("value")},this.contentReady=l=>{this.textBox=l.component}}ngOnInit(){this._getAll()}ngOnDestroy(){super.dispose()}onInitNewRow(i){this.popUpLabel="Add User"}onEditingStart(i){var t;this.popUpLabel="Edit User",this.currentUserIdEditing=i.data.id===(null===(t=this.userCache)||void 0===t?void 0:t.id)}onEditCanceled(i){this.currentUserIdEditing=!1}onRowRemoving(i){var t;i.data.id===(null===(t=this.userCache)||void 0===t?void 0:t.id)&&((0,U.Z)("You cannot delete yourself.","error",2e3),i.cancel=!0)}onSaving(i){var t=this;return(0,v.Z)(function*(){(0,Z.F2)(t._usersService,i,()=>t._getAll())})()}_getAll(){this._usersService.getAll().pipe((0,h.P)(),(0,f.U)(i=>null==i?void 0:i.map(t=>(t.birthday&&(t.birthday=new Date(+t.birthday)),t.createdDate&&(t.createdDate=new Date(+t.createdDate)),t)))).subscribe(i=>{this.users=null!=i?i:[],console.log(this.users)})}log(i){console.log(i)}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(c.KD),e.Y36(T.e8))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-users-manager"]],hostAttrs:[1,"default-app-style"],features:[e.qOj],decls:43,vars:27,consts:[[1,"text-6xl","mb-6"],["keyExpr","id",1,"shadow-xl",3,"dataSource","allowColumnReordering","allowColumnResizing","onInitNewRow","onEditingStart","onSaving","onEditCanceled","onRowRemoving"],["dataField","firstName"],["dataField","lastName"],["dataField","birthday","caption","Birthday","dataType","date"],["type","required"],["dataField","type","caption","Type"],["valueExpr","value","displayExpr","text",3,"dataSource"],["dataField","phone","caption","Phone","editorType","dxNumberBox"],["dataField","allowLogin","caption","Allow Login","dataType","boolean"],["dataField","address","caption","Address"],["dataField","email","caption","Email"],["type","email"],["dataField","password",3,"visible"],["mode","popup",3,"allowUpdating","allowDeleting","allowAdding"],["width","auto","height","auto",3,"title","showTitle"],[3,"click"],["form",""],["itemType","group",3,"colCount","colSpan"],["dataField","birthday","dataType","date"],["dataField","phone","editorType","dxNumberBox"],["dataField","type",3,"disabled"],["dataField","address",3,"colSpan"],["dataField","email",3,"colSpan",4,"ngIf"],["dataField","password",3,"colSpan","editorOptions"],["dataField","allowLogin",3,"editorOptions"],[3,"visible"],["displayMode","adaptive",3,"visible","allowedPageSizes","showInfo"],["dataField","email",3,"colSpan"]],template:function(i,t){if(1&i){const l=e.EpF();e.TgZ(0,"h1",0),e._uU(1,"Users"),e.qZA(),e.TgZ(2,"dx-data-grid",1),e.NdJ("onInitNewRow",function(n){return t.onInitNewRow(n)})("onEditingStart",function(n){return t.onEditingStart(n)})("onSaving",function(n){return t.onSaving(n)})("onEditCanceled",function(n){return t.onEditCanceled(n)})("onRowRemoving",function(n){return t.onRowRemoving(n)}),e._UZ(3,"dxi-column",2),e._UZ(4,"dxi-column",3),e.TgZ(5,"dxi-column",4),e._UZ(6,"dxi-validation-rule",5),e.qZA(),e.TgZ(7,"dxi-column",6),e._UZ(8,"dxo-lookup",7),e._UZ(9,"dxi-validation-rule",5),e.qZA(),e.TgZ(10,"dxi-column",8),e._UZ(11,"dxi-validation-rule",5),e.qZA(),e._UZ(12,"dxi-column",9),e.TgZ(13,"dxi-column",10),e._UZ(14,"dxi-validation-rule",5),e.qZA(),e.TgZ(15,"dxi-column",11),e._UZ(16,"dxi-validation-rule",5),e._UZ(17,"dxi-validation-rule",12),e.qZA(),e._UZ(18,"dxi-column",13),e.TgZ(19,"dxo-editing",14),e._UZ(20,"dxo-popup",15),e.TgZ(21,"dxo-form",16,17),e.NdJ("click",function(){e.CHM(l);const n=e.MAs(22);return t.log(n)}),e.TgZ(23,"dxi-item",18),e.TgZ(24,"dxi-item",2),e._UZ(25,"dxi-validation-rule",5),e.qZA(),e.TgZ(26,"dxi-item",3),e._UZ(27,"dxi-validation-rule",5),e.qZA(),e.TgZ(28,"dxi-item",19),e._UZ(29,"dxi-validation-rule",5),e.qZA(),e.TgZ(30,"dxi-item",20),e._UZ(31,"dxi-validation-rule",5),e.qZA(),e.TgZ(32,"dxi-item",21),e.TgZ(33,"dxo-lookup",7),e._UZ(34,"dxi-validation-rule",5),e.qZA(),e.qZA(),e.TgZ(35,"dxi-item",22),e._UZ(36,"dxi-validation-rule",5),e.qZA(),e.YNc(37,y,3,1,"dxi-item",23),e.TgZ(38,"dxi-item",24),e._UZ(39,"dxi-validation-rule",5),e.qZA(),e._UZ(40,"dxi-item",25),e.qZA(),e.qZA(),e.qZA(),e._UZ(41,"dxo-filter-row",26),e._UZ(42,"dxo-pager",27),e.qZA()}2&i&&(e.xp6(2),e.Q6J("dataSource",t.users)("allowColumnReordering",!0)("allowColumnResizing",!0),e.xp6(6),e.Q6J("dataSource",t.userType),e.xp6(10),e.Q6J("visible",!1),e.xp6(1),e.Q6J("allowUpdating",!0)("allowDeleting",!0)("allowAdding",!0),e.xp6(1),e.Q6J("title",t.popUpLabel)("showTitle",!0),e.xp6(3),e.Q6J("colCount",2)("colSpan",2),e.xp6(9),e.Q6J("disabled",t.currentUserIdEditing),e.xp6(1),e.Q6J("dataSource",t.userType),e.xp6(2),e.Q6J("colSpan",2),e.xp6(2),e.Q6J("ngIf","Add User"===t.popUpLabel),e.xp6(1),e.Q6J("colSpan",1)("editorOptions",e.DdM(23,w)),e.xp6(2),e.Q6J("editorOptions",e.VKq(24,A,t.currentUserIdEditing)),e.xp6(1),e.Q6J("visible",!0),e.xp6(1),e.Q6J("visible",!0)("allowedPageSizes",e.DdM(26,S))("showInfo",!0))},directives:[m.e,d.qvW,d.vrV,d.w3U,d.Uo8,d.gt6,d.U12,d.ZT3,p.O5,d.I62,d.ilc],styles:[""]}),a})()}];let M=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[g.Bz.forChild(C)],g.Bz]}),a})();var _=o(4043);let R=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[p.ez,M,m.x,_.k]]}),a})()}}]);