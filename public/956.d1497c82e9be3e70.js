"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[956],{3956:(lt,N,n)=>{n.d(N,{Z:()=>nt});var f=n(1374),m=n(3520),D=n(4500),x=n(7075),B=n(8082),S=n(4705),F=n(7771),u=n(3684),M=n(6885),p=n(1924),O=n(4596),j=n(2657),T=n(6129),Y=n(6795),G=n(8811),y=n(7839),Q=n(7462),K=n(3366),U=n(6836),A={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},J=n(2418),k=["shading","$arrow"],d={left:-1,top:-1,center:0,right:1,bottom:1},H={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},q={h:10,v:10};class tt extends J.H{constructor(e){var{shading:i,$arrow:o}=e;super((0,K.Z)(e,k)),this._props=(0,Q.Z)({},this._props,{shading:i}),this._$arrow=o,this._positionSide=void 0}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}_renderBoundaryOffset(){}_getContainerPosition(){var e=(0,U.TG)(this._position.offset||""),{h:i,v:o}=e,r=this._isVerticalSide(),s=this._isHorizontalSide();if(r||s){var g=(this._isPopoverInside()?-1:1)*d[this._positionSide]*((r?(0,f.Cr)(this._$arrow):(0,f.dz)(this._$arrow))-this._getContentBorderWidth(this._positionSide));r?o+=g:i+=g}return(0,u.l)({},this._position,{offset:i+" "+o})}_getContentBorderWidth(e){var i=this._$content.css(A[e]);return parseInt(i)||0}_isPopoverInside(){var e=p.Z.setup.normalizeAlign(this._position.my),i=p.Z.setup.normalizeAlign(this._position.at);return e.h===i.h&&e.v===i.v}_isVerticalSide(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"top"===e||"bottom"===e}_isHorizontalSide(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"left"===e||"right"===e}_getDisplaySide(e){var i=p.Z.setup.normalizeAlign(e.my),o=p.Z.setup.normalizeAlign(e.at),r=d[i.h]===d[o.h]&&d[i.v]===d[o.v]?-1:1;return Math.abs(d[i.h]-r*d[o.h])>Math.abs(d[i.v]-r*d[o.v])?o.h:o.v}_normalizePosition(e,i){var r,o={of:i,boundaryOffset:q};return r=(0,O.$K)(e)?(0,u.l)(!0,{},o,this._positionToObject(e)):o,this._positionSide=this._getDisplaySide(r),r}_positionToObject(e){return(0,O.HD)(e)?(0,u.l)({},H[e]):e}}var V={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},Z=function(t){return(0,O.Kn)(t)?t.name:t},L=function(t,e){var i=t.option(e);return Z(i)},E=function(t,e){var{target:i,shading:o,disabled:r,hideEvent:s}=t.option(),l=(0,O.HD)(i),v=o&&"hide"===e,h=v?null:L(t,"".concat(e,"Event"));if(v&&s&&Y.Z.log("W1020"),h&&!r){var a=(0,T.V4)(h,t.NAME),g=t._createAction(function(){var c=function(t,e){var i=t.option(e);return(0,O.Kn)(i)&&i.delay}(t,e+"Event");this._clearEventsTimeouts(),c?this._timeouts[e]=setTimeout(function(){t[e]()},c):t[e]()}.bind(t),{validatingTargetName:"target"}),C=function(c){g({event:c,target:(0,m.Z)(c.currentTarget)})},_="_"+e+"EventHandler";if(l)t[_]=C,S.Z.on(B.Z.getDocument(),a,i,C);else{var b=(0,x.u)((0,m.Z)(i));t[_]=void 0,S.Z.on(b,a,C)}}},z=function(t,e,i,o){var r=o||L(t,i+"Event");if(r){r=(0,T.V4)(r,t.NAME);var s="_"+i+"EventHandler";t[s]?S.Z.off(B.Z.getDocument(),r,e,t[s]):S.Z.off((0,x.u)((0,m.Z)(e)),r)}},I=G.Z.inherit({_getDefaultOptions:function(){return(0,u.l)(this.callBase(),{target:void 0,shading:!1,position:(0,u.l)({},H.bottom),closeOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:function(){return[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:function(){return!(0,D.Ym)()},options:{animation:null}}]},_init:function(){this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper")},_render:function(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents:function(t){z(this,t,"show"),z(this,t,"hide")},_attachEvents:function(){E(this,"show"),E(this,"hide")},_renderArrow:function(){this._$arrow=(0,m.Z)("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler:function(t){return!this._isOutsideClick(t)||this.callBase(t)},_isOutsideClick:function(t){return!(0,m.Z)(t.target).closest(this.option("target")).length},_animate:function(t){t&&t.to&&"object"==typeof t.to&&(0,u.l)(t.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation:function(){this.callBase.apply(this,arguments)},_renderTitle:function(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition:function(){this.callBase(),this._renderOverlayPosition(),this._actions.onPositioned()},_renderOverlayPosition:function(){this._resetOverlayPosition(),this._updateContentSize();var t=this._getContainerPosition(),e=p.Z.setup(this.$overlayContent(),t),i=this._getSideByLocation(e);this._togglePositionClass("dx-position-"+i),this._toggleFlippedClass(e.h.flip,e.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(i)},_resetOverlayPosition:function(){this._setContentHeight(!0),this._togglePositionClass("dx-position-"+this._positionController._positionSide),(0,M.pB)(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize:function(){if(this.$content()){var t=p.Z.calculate(this.$overlayContent(),this._getContainerPosition());if(t.h.oversize>0&&this._isHorizontalSide()&&!t.h.fit){var e=(0,f.dz)(this.$overlayContent())-t.h.oversize;(0,f.cl)(this.$overlayContent(),e)}if(t.v.oversize>0&&this._isVerticalSide()&&!t.v.fit){var i=(0,f.Cr)(this.$overlayContent())-t.v.oversize,o=(0,f.Cr)(this.$content())-t.v.oversize;(0,f.QQ)(this.$overlayContent(),i),(0,f.QQ)(this.$content(),o)}}},_getContainerPosition:function(){return this._positionController._getContainerPosition()},_getSideByLocation:function(t){var e=t.v.flip,i=t.h.flip;return this._isVerticalSide()&&e||this._isHorizontalSide()&&i||this._isPopoverInside()?V[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass:function(t){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(t)},_toggleFlippedClass:function(t,e){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",t).toggleClass("dx-popover-flipped-vertical",e)},_renderArrowPosition:function(t){var e=(0,y.l)(this._$arrow.get(0)),i=-(this._isVerticalSide(t)?e.height:e.width);this._$arrow.css(V[t],i);var w,o=this._isVerticalSide(t)?"left":"top",r=this._isVerticalSide(t)?"width":"height",s=(0,m.Z)(this._positionController._position.of),l=p.Z.offset(s)||{top:0,left:0},v=p.Z.offset(this.$overlayContent()),h=e[r],a=v[o],g=(0,y.l)(this.$overlayContent().get(0))[r],C=l[o],_=s.get(0),b=_&&!_.preventDefault?(0,y.l)(_)[r]:0,c=Math.max(a,C),R=Math.min(a+g,C+b);w="start"===this.option("arrowPosition")?c-a:"end"===this.option("arrowPosition")?R-a-h:(c+R)/2-a-h/2;var $=this._positionController._getContentBorderWidth(t),at=(0,j.n$)(w-$+this.option("arrowOffset"),$,g-h-2*$);this._$arrow.css(o,at)},_isPopoverInside:function(){return this._positionController._isPopoverInside()},_setContentHeight:function(t){t&&this.callBase()},_getPositionControllerConfig(){var{shading:t}=this.option();return(0,u.l)({},this.callBase(),{shading:t,$arrow:this._$arrow})},_initPositionController(){this._positionController=new tt(this._getPositionControllerConfig())},_renderWrapperDimensions:function(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide:function(t){return this._positionController._isVerticalSide(t)},_isHorizontalSide:function(t){return this._positionController._isHorizontalSide(t)},_clearEventTimeout:function(t){clearTimeout(this._timeouts[t])},_clearEventsTimeouts:function(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean:function(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged:function(t){switch(t.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":t.value&&this.option("fullScreen",!1);break;case"target":t.previousValue&&this._detachEvents(t.previousValue),this.callBase(t);break;case"showEvent":case"hideEvent":var e=t.name.substring(0,4),i=Z(t.previousValue);this.hide(),z(this,this.option("target"),e,i),E(this,e);break;case"visible":this._clearEventTimeout(t.value?"show":"hide"),this.callBase(t);break;default:this.callBase(t)}},show:function(t){return t&&this.option("target",t),this.callBase()}});(0,F.Z)("dxPopover",I);const nt=I}}]);