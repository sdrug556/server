"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[807],{7807:(f,p,n)=>{n.r(p),n.d(p,{ReportsProductsModule:()=>y});var m=n(9808),l=n(9735),x=n(590),u=n(573),v=n(6469),t=n(5e3),_=n(6082),d=n(1221),s=n(7805),Z=n(9828);function P(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"dx-button",17),t.NdJ("onClick",function(c){return t.CHM(o),t.oxw().filterClicked(c)}),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("type","Low Stocks"==o.activeButton?"default":"normal")}}function g(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"dx-button",18),t.NdJ("onClick",function(c){return t.CHM(o),t.oxw().filterClicked(c)}),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("type","Expired"==o.activeButton?"default":"normal")}}function C(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"dx-button",19),t.NdJ("onClick",function(c){return t.CHM(o),t.oxw().filterClicked(c)}),t.qZA(),t.qZA()}}function R(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"dx-button",20),t.NdJ("onClick",function(){return t.CHM(o),t.oxw().generateReport()}),t.qZA(),t.qZA()}}const T=[{path:"",component:(()=>{class e{constructor(o,a){this._productService=o,this._activatedRoute=a}ngOnInit(){this._productService.getAll().pipe((0,x.P)()).subscribe(o=>{const a=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}),c=+(0,v.Z)();this.products=o.map(i=>(i.price=a.format(i.price),i.isExpired=i.expiration<c,i.lowStock=i.stock<=i.reorderPoint,i.expiration=new Date(+i.expiration),i.createdDate=new Date(+i.createdDate),i)),console.table(this.products),this._activatedRoute.snapshot.queryParams.activeButton&&(this.activeButton=this._activatedRoute.snapshot.queryParams.activeButton,setTimeout(()=>this._filterByActiveButton()))})}filterClicked(o){this.activeButton=o.component.option("text"),console.log(this.activeButton),this._filterByActiveButton()}_filterByActiveButton(){switch(this.activeButton){case"Low Stocks":this.dxDataGrid.instance.filter(["lowStock","=",!0]);break;case"Expired":this.dxDataGrid.instance.filter(["isExpired","=",!0]);break;default:this.dxDataGrid.instance.filter(null)}}generateReport(){this.dxDataGrid.instance.exportToExcel(!1)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.M),t.Y36(l.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-reports-products"]],viewQuery:function(o,a){if(1&o&&t.Gf(u.e,5),2&o){let c;t.iGM(c=t.CRH())&&(a.dxDataGrid=c.first)}},hostAttrs:[1,"default-app-style"],decls:25,vars:8,consts:[[1,"text-6xl","mb-6"],["keyExpr","id",1,"shadow-xl",3,"dataSource"],["fileName","products-report",3,"enabled"],[3,"allowUpdating","allowDeleting","allowAdding"],[3,"visible"],["location","before","name","groupPanel"],["location","after"],[4,"dxTemplate"],["dataField","isExpired","caption","Name",3,"visible"],["dataField","lowStock","caption","Name",3,"visible"],["dataField","name","caption","Name"],["dataField","description","caption","Description"],["dataField","createdDate","caption","Created Date","dataType","date"],["dataField","price","caption","Price"],["dataField","expiration","caption","Expiration","dataType","date"],["dataField","stock","caption","Stocks"],["dataField","reorderPoint","caption","Reorder Point"],["text","Low Stocks",3,"type","onClick"],["text","Expired",3,"type","onClick"],["text","All",3,"onClick"],["text","Generate Report","type","default",3,"onClick"]],template:function(o,a){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Products Reports"),t.qZA(),t.TgZ(2,"dx-data-grid",1),t._UZ(3,"dxo-export",2),t._UZ(4,"dxo-editing",3),t._UZ(5,"dxo-group-panel",4),t.TgZ(6,"dxo-toolbar"),t._UZ(7,"dxi-item",5),t.TgZ(8,"dxi-item",6),t.YNc(9,P,2,1,"div",7),t.qZA(),t.TgZ(10,"dxi-item",6),t.YNc(11,g,2,1,"div",7),t.qZA(),t.TgZ(12,"dxi-item",6),t.YNc(13,C,2,0,"div",7),t.qZA(),t.TgZ(14,"dxi-item",6),t.YNc(15,R,2,0,"div",7),t.qZA(),t.qZA(),t._UZ(16,"dxi-column",8),t._UZ(17,"dxi-column",9),t._UZ(18,"dxi-column",10),t._UZ(19,"dxi-column",11),t._UZ(20,"dxi-column",12),t._UZ(21,"dxi-column",13),t._UZ(22,"dxi-column",14),t._UZ(23,"dxi-column",15),t._UZ(24,"dxi-column",16),t.qZA()),2&o&&(t.xp6(2),t.Q6J("dataSource",a.products),t.xp6(1),t.Q6J("enabled",!0),t.xp6(1),t.Q6J("allowUpdating",!1)("allowDeleting",!1)("allowAdding",!1),t.xp6(1),t.Q6J("visible",!0),t.xp6(11),t.Q6J("visible",!1),t.xp6(1),t.Q6J("visible",!1))},directives:[u.e,s.Ak0,s.Uo8,s.Een,s.y1f,s.ZT3,Z.p6,d.K,s.qvW],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(T)],l.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,h,u.x,d.e]]}),e})()},6082:(f,p,n)=>{n.d(p,{M:()=>v});var m=n(2340),l=n(3857),x=n(5e3),u=n(520);let v=(()=>{class t extends l.b{constructor(d){super(d),this.http=d,this.BASE_ROUTE="product"}getProductBySupplier(d){return this.http.get(`${m.N.apiUrl}/product/supplier/${d}`)}}return t.\u0275fac=function(d){return new(d||t)(x.LFG(u.eN))},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);